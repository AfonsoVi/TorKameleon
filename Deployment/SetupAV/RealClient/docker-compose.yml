version: '3.9'
services:
  chaffclient:
    build: .
    volumes:
      - /home/afonso/Desktop/ThesisCode:/code
    command: bash -c "cp /code/Deployment/SetupAV/RealClient/config.properties /code/PT/Config/config.properties &&
                      cp /code/Deployment/SetupAV/RealClient/WebRTC/configC.js /code/PT/WebRTC/Client/public/config/config.js &&
                      cd /code/PT/target && 
                      java -jar proxy-jar-with-dependencies.jar pt-client &
                      sleep 3 &&
                      tor &
                      cd /code/Client/target && 
                      java -jar client-1.0-SNAPSHOT-jar-with-dependencies.jar async/notimer tcp ../Files/large 1 1"
    networks:
      - test
networks:
  test:
    external: true
                    

          